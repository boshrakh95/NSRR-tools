# Modality Group Definitions
# Based on SleepFM's 4-modality system: BAS, RESP, EKG, EMG

modalities:
  EEG:
    description: "Electroencephalography - Brain electrical activity"
    sleepfm_group: "BAS"  # BAS = Brain Activity Signals (includes EEG + EOG)
    channels:
      # Priority order based on SleepFM prevalence and clinical importance
      - C3-M2          # Priority 1: Central, most common (99.85%)
      - C4-M1          # Priority 2: Central, most common (99.85%)
      - O1-M2          # Priority 3: Occipital
      - O2-M1          # Priority 4: Occipital
      - F3-M2          # Priority 5: Frontal
      - F4-M1          # Priority 6: Frontal
      - A1             # Priority 7: Reference (73.74%)
      - A2             # Priority 8: Reference (73.74%)
      - M1             # Priority 9: Mastoid reference (26.11%)
      - M2             # Priority 10: Mastoid reference (26.11%)
    processing_params: eeg
    required: true  # At least one EEG channel required
    
  EOG:
    description: "Electrooculography - Eye movement"
    sleepfm_group: "BAS"
    channels:
      - LOC            # Priority 1: Left EOG (73.92%)
      - ROC            # Priority 2: Right EOG (73.92%)
      - E1             # Priority 3: Alternative left (26.08%)
      - E2             # Priority 4: Alternative right (26.08%)
    processing_params: eog
    required: false
    
  ECG:
    description: "Electrocardiography - Cardiac electrical activity"
    sleepfm_group: "EKG"
    channels:
      - EKG            # Priority 1: Main ECG
      - ECG-L          # Priority 2: Left lead
      - ECG-R          # Priority 3: Right lead (usually only 2 max)
    processing_params: ecg
    required: false
    
  EMG:
    description: "Electromyography - Muscle electrical activity"
    sleepfm_group: "EMG"
    channels:
      - CHIN           # Priority 1: Chin EMG (73.77%)
      - LLEG           # Priority 2: Left leg (73.92%)
      - RLEG           # Priority 3: Right leg (73.92%)
      - EMG            # Priority 4: Generic EMG (26.08%)
    processing_params: emg
    required: false
    
  RESP:
    description: "Respiratory signals - Effort belts, SpO2, airflow"
    sleepfm_group: "RESP"
    channels:
      - Airflow        # Priority 1: Most important
      - Thor           # Priority 2: Thoracic effort
      - ABD            # Priority 3: Abdominal effort
      - SpO2           # Priority 4: Oxygen saturation
      - HR             # Priority 5: Heart rate from pulse oximetry
      - Snore          # Priority 6: Snoring
      - RespRate       # Priority 7: Respiratory rate
    processing_params: resp
    required: false
    note: "Only physiological respiratory channels, no technical/device channels"

# SleepFM modality groupings (from paper: "BAS allowed up to ten channels, 
# for ECG two channels, for EMG four channels and for respiratory seven channels")
sleepfm_modalities:
  BAS:
    description: "Brain Activity Signals (EEG + EOG)"
    includes:
      - EEG
      - EOG
    max_channels: 10  # SleepFM paper specification
    priority_order:   # When >10 channels, keep these in order
      - C3-M2
      - C4-M1
      - LOC
      - ROC
      - O1-M2
      - O2-M1
      - F3-M2
      - F4-M1
      - A1
      - A2
    
  RESP:
    description: "Respiratory signals"
    includes:
      - RESP
    max_channels: 7   # SleepFM paper specification
    priority_order:
      - Airflow
      - Thor
      - ABD
      - SpO2
      - HR
      - Snore
      - RespRate
    
  EKG:
    description: "Cardiac signals"
    includes:
      - ECG
    max_channels: 2   # SleepFM paper specification
    priority_order:
      - EKG
      - ECG-L
    
  EMG:
    description: "Muscle activity"
    includes:
      - EMG
    max_channels: 4   # SleepFM paper specification
    priority_order:
      - CHIN
      - LLEG
      - RLEG
      - EMG

# Minimum requirements for valid recordings
minimum_requirements:
  # At least one modality from each group for multimodal experiments
  option_1:
    description: "Full multimodal (all 4 modalities)"
    required_modalities:
      - EEG
      - EOG
      - ECG
      - EMG
      - RESP
    min_channels_per_modality:
      EEG: 1
      EOG: 1
      ECG: 1
      EMG: 1
      RESP: 1
  
  option_2:
    description: "Core modalities (EEG + at least 2 others)"
    required_modalities:
      - EEG
    min_other_modalities: 2
    min_channels_per_modality:
      EEG: 2
  
  option_3:
    description: "Minimal (EEG only - for baseline)"
    required_modalities:
      - EEG
    min_channels_per_modality:
      EEG: 2
